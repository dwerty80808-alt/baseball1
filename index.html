<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>누나 나랑 야구보러갈래요?</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#ffe8e8,#fff);
  overflow:hidden;
}

.wrap{
  text-align:center;
  position:relative;
}

.main-illust{
  width:150px;
  margin:0 auto 20px;
  display:block;
}

h1{
  font-size:24px;
  margin-bottom:40px;
}

button{
  font-size:18px;
  padding:12px 26px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  position:absolute;
  box-shadow:0 6px 15px rgba(0,0,0,0.15);
  transition:transform .15s;
}

button:active{
  transform:scale(0.95);
}

#yes{
  background:#ff6b6b;
  color:white;
}

#no{
  background:#ddd;
}
</style>
</head>

<body>

<div class="wrap">
  <img src="illust.jpg" class="main-illust">
  <h1>누나 나랑 야구 보러 갈래요?</h1>

  <!-- ⭐ 버튼을 wrap 안으로 -->
  <button id="yes">YES</button>
  <button id="no">NO</button>
</div>

<script>
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const wrap = document.querySelector(".wrap");

let btnX = 0;
let btnY = 0;

function clamp(value, min, max) {
  return Math.min(Math.max(value, min), max);
}

// ⭐ 시작 위치 → wrap 아래
function setStartPosition() {
  const centerX = wrap.offsetWidth / 2;
  const startY = wrap.offsetHeight + 20;

  yesBtn.style.left = (centerX - yesBtn.offsetWidth - 20) + "px";
  yesBtn.style.top = startY + "px";

  btnX = centerX + 20;
  btnY = startY;

  noBtn.style.left = btnX + "px";
  noBtn.style.top = btnY + "px";
}

window.addEventListener("load", setStartPosition);
window.addEventListener("resize", setStartPosition);

// YES → 다음 페이지
yesBtn.addEventListener("click", () => {
  window.location.href = "success.html";
});

// 도망
function moveAway(x, y){
  const rect = noBtn.getBoundingClientRect();
  const centerX = rect.left + rect.width/2;
  const centerY = rect.top + rect.height/2;

  const dx = centerX - x;
  const dy = centerY - y;
  const distance = Math.sqrt(dx*dx + dy*dy);

  const trigger = 130;

  if(distance < trigger){
    const force = (trigger - distance) / trigger;
    btnX += (dx/distance) * force * 25;
    btnY += (dy/distance) * force * 25;

    const maxX = wrap.offsetWidth - noBtn.offsetWidth;
    const maxY = wrap.offsetHeight - noBtn.offsetHeight;

    btnX = clamp(btnX, 0, maxX);
    btnY = clamp(btnY, 0, maxY);

    noBtn.style.left = btnX + "px";
    noBtn.style.top = btnY + "px";
  }
}

// PC
document.addEventListener("mousemove",(e)=>{
  moveAway(e.clientX, e.clientY);
});

// 모바일
document.addEventListener("touchmove",(e)=>{
  moveAway(e.touches[0].clientX, e.touches[0].clientY);
});

// 모바일에서 누르면 랜덤 이동
noBtn.addEventListener("click",()=>{
  const maxX = wrap.offsetWidth - noBtn.offsetWidth;
  const maxY = wrap.offsetHeight - noBtn.offsetHeight;

  btnX = Math.random() * maxX;
  btnY = Math.random() * maxY;

  noBtn.style.left = btnX + "px";
  noBtn.style.top = btnY + "px";
});
</script>

</body>
</html>
